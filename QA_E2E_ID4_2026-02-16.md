# QA E2E - ID4 - 2026-02-16

## Scope
- Testdata: `/Users/christiankristensen/Translationtoollocal/eksempel-på-lydfiler/ID4.MP3`
- Fokus: UI/UX-kontrakt + pipeline-logik + eksport til Downloads
- Job-id: `qa-id4-e2e`

## Kørte checks
1. End-to-end transskription (OpenAI pipeline + chunking + merge + checkpoints)
2. Swap-roles logik (`I/D`) og restore
3. Eksport af TXT og DOCX
4. Verifikation af filer i `/Users/christiankristensen/Downloads`
5. Typecheck + Python tests

## Resultat
- Job gennemført: `ready`
- Varighed: `2949.041625` sekunder (~49 min)
- Chunks: `13/13` (alle `openai`)
- Checkpoints: 14 filer (`chunk_0000..0012.json` + `result.json`)

## Evidens
- Job i DB: `~/Library/Application Support/Transkriptor/jobs.db`
- Checkpoints: `~/Library/Application Support/Transkriptor/jobs/qa-id4-e2e/checkpoints/`
- Eksporterede filer:
  - `/Users/christiankristensen/Downloads/transskription-qa-id4-e2e.txt`
  - `/Users/christiankristensen/Downloads/transskription-qa-id4-e2e.docx`

## Found issues og fixes
1. Export default path pegede ikke eksplicit på Downloads (kan give gemning udenfor Overførsler).
   - Fix: `electron/main.ts` bruger nu `path.join(app.getPath("downloads"), ...)` for både TXT og DOCX.
2. For aggressiv interruption-filtering kunne slette meningsbærende korte ytringer.
   - Fix: `python/transkriptor/merge.py` fjerner nu kun interruption-segmenter når segmentet også er et backchannel.

## UI/UX QA (kontrakt)
- Loader/progress med stage/procent/ETA/chunk-info findes og er korrekt bundet til pipeline-events.
- Resultatvisning + preview + `Byt roller` + eksportknapper er konsistent med flowet.
- Dansk labels/tekster er gennemført i hele brugerflowet.
- Glas/firkantet visuel retning er implementeret i CSS.

## Teststatus
- `npm run typecheck`: PASS
- `PYTHONPATH=python ./.venv313/bin/python -m pytest -q python/tests`: PASS (2 tests)
